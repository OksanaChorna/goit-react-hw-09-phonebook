(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[4],{109:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(28),o=n.n(a),u=n(25),i=n(17),s=(n(84),n(85),n(7)),b=n(18),j=n(131),l=n(132),d=n(134),O=n(135),f=n(133),h=n(136),p=n(2);function g(){var t=Object(i.b)(),e=Object(i.c)(b.c.getUserName),n=Object(c.useCallback)((function(){t(b.a.logOut())}),[t]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:Object(p.jsxs)("p",{children:["Welcome, ",e,"!"]})}),Object(p.jsx)(h.a,{color:"inherit",type:"button",onClick:n,children:"Logout"})]})}var x=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h.a,{color:"inherit",component:u.b,exact:!0,to:"/register",children:"Registration"}),Object(p.jsx)(h.a,{color:"inherit",component:u.b,exact:!0,to:"/login",children:"Login"})]})},m=Object(j.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1,textDecoration:"none"}}}));function v(){var t=m(),e=Object(i.c)(b.c.getIsAuthenticated);return Object(p.jsx)("div",{className:t.root,children:Object(p.jsx)(l.a,{position:"static",children:Object(p.jsx)(f.a,{maxWidth:"lg",children:Object(p.jsxs)(d.a,{id:"toolbar-menu",children:[Object(p.jsx)(O.a,{variant:"h6",color:"inherit",className:t.title,component:u.b,exact:!0,to:"/",children:"Main"}),e&&Object(p.jsx)(O.a,{variant:"h6",color:"inherit",className:t.title,component:u.b,exact:!0,to:"/contacts",children:"PhoneBook"}),e?Object(p.jsx)(g,{}):Object(p.jsx)(x,{})]})})})})}var k=n(33),C=n(45);function y(t){t.isAuthenticated;var e=t.children,n=t.redirectTo,c=Object(C.a)(t,["isAuthenticated","children","redirectTo"]),r=Object(i.c)(b.c.getIsAuthenticated);return Object(p.jsx)(s.b,Object(k.a)(Object(k.a)({},c),{},{children:r?e:Object(p.jsx)(s.a,{to:n})}))}var w=function(t){t.isAuthenticated;var e=t.redirectTo,n=t.children,c=Object(C.a)(t,["isAuthenticated","redirectTo","children"]),r=Object(i.c)(b.c.getIsAuthenticated);return Object(p.jsx)(s.b,Object(k.a)(Object(k.a)({},c),{},{children:r&&c.restricted?Object(p.jsx)(s.a,{to:e}):n}))},A=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,193))})),R=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,194))})),E=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,197))})),S=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,199))}));function U(){var t=Object(i.b)();return Object(c.useEffect)((function(){t(b.a.getCurrentUser)}),[t]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v,{}),Object(p.jsx)(c.Suspense,{fallback:Object(p.jsx)("p",{children:"Wait..."}),children:Object(p.jsxs)(s.d,{children:[Object(p.jsx)(w,{exact:!0,path:"/",children:Object(p.jsx)(A,{})}),Object(p.jsx)(w,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(p.jsx)(R,{})}),Object(p.jsx)(w,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(p.jsx)(E,{})}),Object(p.jsx)(y,{path:"/contacts",redirectTo:"/login",children:Object(p.jsx)(S,{})}),Object(p.jsx)(s.a,{to:"/"})]})})]})}var I=n(44),L=n(3),T=n(71),q=n.n(T),z=n(27),F=n(72),N=n.n(F),B=n(51),P=[].concat(Object(I.a)(Object(L.d)({serializableCheck:{ignoredActions:[z.a,z.f,z.b,z.c,z.d,z.e]}})),[q.a]),W={key:"auth",storage:N.a,whitelist:["token"]},G=Object(L.a)({reducer:{contacts:B.c,auth:Object(z.g)(W,b.b)},middleware:P,devToolss:!1}),J={store:G,persistor:Object(z.h)(G)},M=n(73);o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(i.a,{store:J.store,children:Object(p.jsx)(M.a,{loading:null,persistor:J.persistor,children:Object(p.jsx)(u.a,{children:Object(p.jsx)(U,{})})})})}),document.getElementById("root"))},12:function(t,e,n){"use strict";n.d(e,"i",(function(){return r})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return d}));var c=n(3),r=Object(c.b)("contacts/fetchContactRequest"),a=Object(c.b)("contacts/fetchContactSuccess"),o=Object(c.b)("contacts/fetchContactError"),u=Object(c.b)("contacts/addContactRequest"),i=Object(c.b)("contacts/addContactSuccess"),s=Object(c.b)("contacts/addContactError"),b=Object(c.b)("contacts/deleteContactRequest"),j=Object(c.b)("contacts/deleteContactSuccess"),l=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contacts/filterContact")},18:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return R})),n.d(e,"b",(function(){return F}));var c={getIsAuthenticated:function(t){return t.auth.isLogIn},getUserName:function(t){return t.auth.user.name}},r=n(22),a=n.n(r),o=n(31),u=n(20),i=n.n(u),s=n(3),b=Object(s.b)("auth/registerRequest"),j=Object(s.b)("auth/registerSuccess"),l=Object(s.b)("auth/registerError"),d=Object(s.b)("auth/loginRequest"),O=Object(s.b)("auth/loginSuccess"),f=Object(s.b)("auth/loginError"),h=Object(s.b)("auth/logoutRequest"),p=Object(s.b)("auth/logoutSuccess"),g=Object(s.b)("auth/logoutError"),x=Object(s.b)("auth/getCurrentUserRequest"),m=Object(s.b)("auth/getCurrentUserSuccess"),v=Object(s.b)("auth/getCurrentUserError");i.a.defaults.baseURL="https://connections-api.herokuapp.com";var k,C,y,w,A={set:function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},unset:function(){i.a.defaults.headers.common.Authorization=""}},R={token:A,register:function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b()),e.prev=1,e.next=4,i.a.post("/users/signup",t);case 4:c=e.sent,A.set(c.data.token),n(j(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(l(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(d()),e.prev=1,e.next=4,i.a.post("/users/login",t);case 4:c=e.sent,A.set(c.data.token),n(O(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(f(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(h()),t.prev=1,t.next=4,i.a.post("/users/logout");case 4:A.unset(),e(p()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(g(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(o.a)(a.a.mark((function t(e,n){var c,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n(),r=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return A.set(r),e(x()),t.prev=5,t.next=8,i.a.get("/users/current");case 8:o=t.sent,e(m(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(v(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},E=n(5),S=n(11),U={name:null,email:null},I=Object(s.c)(U,(k={},Object(E.a)(k,j,(function(t,e){return e.payload.user})),Object(E.a)(k,O,(function(t,e){return e.payload.user})),Object(E.a)(k,p,(function(){return U})),Object(E.a)(k,m,(function(t,e){return e.payload})),k)),L=Object(s.c)(null,(C={},Object(E.a)(C,j,(function(t,e){return e.payload.token})),Object(E.a)(C,O,(function(t,e){return e.payload.token})),Object(E.a)(C,p,(function(){return null})),C)),T=function(t,e){return e.payload},q=Object(s.c)(null,(y={},Object(E.a)(y,l,T),Object(E.a)(y,f,T),Object(E.a)(y,g,T),Object(E.a)(y,v,T),y)),z=Object(s.c)(!1,(w={},Object(E.a)(w,j,(function(){return!0})),Object(E.a)(w,O,(function(){return!0})),Object(E.a)(w,m,(function(){return!0})),Object(E.a)(w,l,(function(){return!1})),Object(E.a)(w,f,(function(){return!1})),Object(E.a)(w,v,(function(){return!1})),Object(E.a)(w,p,(function(){return!1})),w)),F=Object(S.b)({user:I,isLogIn:z,token:L,error:q})},51:function(t,e,n){"use strict";n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return i.a})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return d.d}));var c,r=n(40),a=function(t){return t.contacts.filter},o=function(t){return t.contacts.items},u={getFilter:a,getFilteredContact:Object(r.a)([o,a],(function(t,e){var n=e.toLowerCase();return e?t.filter((function(t){return t.name.toLowerCase().includes(n)})):t})),getAllContacts:o},i=n(55),s=n(5),b=n(44),j=n(3),l=n(11),d=n(12),O=Object(j.c)([],(c={},Object(s.a)(c,d.j,(function(t,e){return e.payload})),Object(s.a)(c,d.c,(function(t,e){var n=e.payload;return[].concat(Object(b.a)(t),[n])})),Object(s.a)(c,d.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),f=Object(j.c)("",Object(s.a)({},d.d,(function(t,e){return e.payload}))),h=Object(l.b)({items:O,filter:f})},55:function(t,e,n){"use strict";var c=n(22),r=n.n(c),a=n(31),o=n(20),u=n.n(o),i=n(12);u.a.defaults.baseURL="https://connections-api.herokuapp.com";e.a={addContact:function(t){var e=t.name,n=t.number;return function(t){var c={name:e,number:n};t(Object(i.b)()),u.a.post("/contacts",c).then((function(e){var n=e.data;return t(Object(i.c)(n))})).catch((function(e){return t(Object(i.a)(e.message))}))}},deleteContact:function(t){return function(e){e(Object(i.f)()),u.a.delete("/contacts/".concat(t)).then((function(){return e(Object(i.g)(t))})).catch((function(t){return e(Object(i.e)(t.message))}))}},fetchContacts:function(){return function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(i.i)()),t.prev=1,t.next=4,u.a.get("/contacts");case 4:n=t.sent,c=n.data,e(Object(i.j)(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(Object(i.h)(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}},85:function(t,e,n){}},[[109,6,7]]]);
//# sourceMappingURL=main.665f79e8.chunk.js.map